<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Comsats Registration</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f4f4f4;
        font-family: Arial, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 10vh;
        margin-bottom: 20vh;
      }

      form {
        max-width: 800px;
        background-color: #fff;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      }

      h2 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
      }

      input,
      textarea,
      select {
        width: 100%;
        padding: 15px;
        margin: 10px 0;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 18px;
      }

      input[type="radio"] {
        margin-right: 5px;
      }

      input[type="submit"] {
        background-color: #4caf50;
        color: white;
        padding: 15px 25px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 20px;
      }

      input[type="submit"]:hover {
        background-color: #45a049;
      }

      .error {
        color: red;
        font-size: 16px;
      }
      .logo {
        text-align: center;
      }

      .logo img {
        display: block;
        margin: 0 auto;
      }

      .logo h2 {
        margin-top: 10px;
        color: red;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <form action="#" method="post" onsubmit="return validateForm()">
            <div class="logo">
              <img src="https://www.cuiatd.edu.pk/wp-content/uploads/2021/06/logo_dark_198_80.png" alt="logo" />
              <h2>Society Registration Form</h2>
            </div>
            <div class="mb-3">
              <label for="firstName" class="form-label">First Name</label>
              <input type="text" class="form-control" id="firstName" />
              <span id="errorFirstName" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="lastName" class="form-label">Last Name</label>
              <input type="text" class="form-control" id="lastName" />
              <span id="errorLastName" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" />
              <span id="errorEmail" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="dob" class="form-label">Date of Birth</label>
              <input type="date" class="form-control" id="dob" max="" />
              <span id="errorDob" class="error"></span>
            </div>

            <div class="mb-3">
              <label class="form-label d-block">Gender</label>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="gender"
                  id="male"
                />
                <label class="form-check-label" for="male">Male</label>
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="gender"
                  id="female"
                />
                <label class="form-check-label" for="female">Female</label>
              </div>
              <span id="errorGender" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="address" class="form-label">Address</label>
              <input type="text" class="form-control" id="address" />
              <span id="errorAddress" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="description" class="form-label"
                >Describe yourself</label
              >
              <textarea
                rows="4"
                class="form-control"
                id="description"
              ></textarea>
              <span id="errorDescription" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="options" class="form-label">Department</label>
              <select class="form-control" id="options">
                <option value="Please Select">Please Select</option>
                <option value="not_mentioned">Not mentioned</option>
                <option value="option1">CS</option>
                <option value="option2">Pharma</option>
                <option value="option3">Electrical</option>
              </select>
              <span id="errorOptions" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="contactNumber" class="form-label"
                >Contact Number</label
              >
              <input type="number" class="form-control" id="contactNumber" />
              <span id="errorContactNumber" class="error"></span>
            </div>

            <div class="mb-3">
              <label for="githubUrl" class="form-label">Github URL</label>
              <input type="url" class="form-control" id="githubUrl" />
              <span id="errorGithubUrl" class="error"></span>
            </div>

            <div class="mb-3">
              <button type="submit" class="btn btn-success" value="Submit">
                Submit
              </button>
              <br />
            </div>
            <button class="btn btn btn-success" href="https://forms.gle/mzcsa2Z8YHEwvCRh9">
              Feedback
            </button>
          </form>
        </div>
      </div>
    </div>

    <script>
      function validateForm() {
        var firstName = document.getElementById("firstName").value;
        var lastName = document.getElementById("lastName").value;
        var email = document.getElementById("email").value;
        var dob = document.getElementById("dob").value;
        var genderMale = document.getElementById("male").checked;
        var genderFemale = document.getElementById("female").checked;
        var address = document.getElementById("address").value;
        var description = document.getElementById("description").value;
        var options = document.getElementById("options").value;
        var contactNumber = document.getElementById("contactNumber").value;
        var githubUrl = document.getElementById("githubUrl").value;
        var isValid = true;

        // Reset error messages
        resetErrors();

        // Check for empty values
        if (
          !validateRequiredField(
            firstName,
            "errorFirstName",
            "Must fill First Name."
          )
        )
          isValid = false;
        if (
          !validateRequiredField(
            lastName,
            "errorLastName",
            "Must fill Last Name."
          )
        )
          isValid = false;
        if (!validateRequiredField(email, "errorEmail", "Must fill Email."))
          isValid = false;
        if (!validateRequiredField(dob, "errorDob", "Must fill the DoB."))
          isValid = false;
        if (
          !validateGender(
            genderMale,
            genderFemale,
            "errorGender",
            "Please select a gender."
          )
        )
          isValid = false;
        if (
          !validateRequiredField(
            address,
            "errorAddress",
            "Must fill the address."
          )
        )
          isValid = false;
        if (
          !validateRequiredField(
            description,
            "errorDescription",
            "Must fill the description."
          )
        )
          isValid = false;
        if (
          !validateOptions(options, "errorOptions", "Please select an option.")
        )
          isValid = false;
        if (!validateContactNumber(contactNumber, "errorContactNumber"))
          isValid = false;
        if (!validateAddressLength(address, "errorAddress")) isValid = false;
        if (!validateDescriptionLines(description, "errorDescription"))
          isValid = false;
        if (!validateNameFormat(firstName, "errorFirstName")) isValid = false;
        if (!validateNameFormat(lastName, "errorLastName")) isValid = false;
        if (!validateGitHubUrl(githubUrl, "errorGithubUrl")) isValid = false;

        return isValid;
      }

      function resetErrors() {
        var errorFields = [
          "errorFirstName",
          "errorLastName",
          "errorEmail",
          "errorDob",
          "errorGender",
          "errorAddress",
          "errorDescription",
          "errorOptions",
          "errorContactNumber",
          "errorGithubUrl",
        ];

        errorFields.forEach(function (field) {
          document.getElementById(field).innerText = "";
        });
      }

      function validateRequiredField(value, errorField, errorMessage) {
        if (value === "") {
          document.getElementById(errorField).innerText = errorMessage;
          return false;
        }
        return true;
      }

      function validateGender(male, female, errorField, errorMessage) {
        if (!male && !female) {
          document.getElementById(errorField).innerText = errorMessage;
          return false;
        }
        return true;
      }

      function validateOptions(value, errorField, errorMessage) {
        if (value === "Please Select") {
          document.getElementById(errorField).innerText = errorMessage;
          return false;
        }
        return true;
      }

      function validateContactNumber(value, errorField) {
        if (value === "") {
          document.getElementById(errorField).innerText =
            "Must fill the contact number";
          return false;
        } else if (value.length !== 11) {
          document.getElementById(errorField).innerText =
            "Contact number must be 11 digits long.";
          return false;
        }
        return true;
      }

      function validateAddressLength(value, errorField) {
        if (value.length > 100) {
          document.getElementById(errorField).innerText =
            "Address is too long.";
          return false;
        }
        return true;
      }

      function validateDescriptionLines(value, errorField) {
        var descriptionLines = value.split("\n").filter(function (line) {
          return line.trim() !== "";
        });

        if (descriptionLines.length < 4 && value !== "") {
          document.getElementById(errorField).innerText =
            "Please provide at least 4 lines in the description.";
          return false;
        }
        return true;
      }

      function validateNameFormat(value, errorField) {
        if (/^\d/.test(value)) {
          document.getElementById(errorField).innerText =
            "Name cannot start with a number.";
          return false;
        }
        return true;
      }

      function validateGitHubUrl(value, errorField) {
        if (value === "") {
          document.getElementById(errorField).innerText =
            "Enter your GitHub link.";
          return false;
        } else if (!isValidUrl(value)) {
          document.getElementById(errorField).innerText =
            "Please enter a valid URL.";
          return false;
        }
        return true;
      }

      function isValidUrl(url) {
        var urlPattern = /^(https?:\/\/)?(github\.com\/[\w-]+)*\/?$/i;

        return urlPattern.test(url);
      }
      document.getElementById("dob").max = new Date()
        .toISOString()
        .split("T")[0];
    </script>
  </body>
</html>
